(()=>{"use strict";const t=function(t,e){const i=t[e];if(null==i)throw new Error(`Missing environment variable [${e}]`);return String(i)},e=t=>{const e=document.createEvent("Event");e.initEvent(t,!0,!0),document.dispatchEvent(e)};let i,n,o,r;function s(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}!function(t){t.Scene7="Scene7Integration",t.Cloudinary="Cloudinary",t.Creator="Creator",t.Unknown="Unknown",t.Static="Static"}(i||(i={})),function(t){t.Js="js",t.CustomJs="customJs",t.LinkAction="link",t.SocialSharing="socialSharing",t.SceneNavigation="sceneNavigation",t.Lightbox="lightbox",t.SalesforceCommerce="demandware"}(n||(n={})),function(t){t.LINE="line",t.SHAPE="shape",t.IMAGE="image",t.LINK="link",t.SCENE_NAVIGATOR="scene-navigator",t.EMBED="embed",t.YOUTUBE="youtube",t.SOCIAL_SHARING="social-sharing",t.TEXT="text",t.TEXT_ENHANCED="text-enhanced",t.BUTTON="button",t.COMPOSITE="composite",t.SALESFORCE_COMMERCE="demandware",t.DYNAMIC_PRODUCT="dynamic-product",t.HTML="html"}(o||(o={}));class a{static get zero(){return new a}constructor(t=0,e=0){this.width=t,this.height=e}get aspectRatio(){return this.width/this.height}shrinkToAspectRatio(t){const e=this.aspectRatio;let i=this.width,n=this.height;return t>e?(i=this.width,n=s(this.width/t,2)):t<e&&(n=this.height,i=s(this.height*t,2)),new a(i,n)}equals(t){return!!t&&(t===this||t instanceof a&&this.width===t.width&&this.height===t.height)}clone(){return new a(this.width,this.height)}}!function(t){t.INITIAL_DIMENSIONS="ZmagsInitialDimensions",t.LOADED_URLS="ZmagsLoadedUrls"}(r||(r={}));const c=["manifest.js","vendor.js","client.js"],h=[new a(3840,3840),new a(2560,2560),new a(2048,2048),new a(1536,1536),new a(1280,1280),new a(1080,1080),new a(960,800),new a(910,448),new a(720,450),new a(480,320),new a(300,300),new a(100,100),new a(50,50)],d=(t,e)=>t.width<=e.width&&t.height<=e.height,l=(t,e,r,s,c,l)=>{const g={},w=[];return t.forEach((t=>{if(((t,e,i)=>{if(void 0!==t.left&&void 0!==t.width&&void 0!==t.top){const n=i.width*(t.left/100);if(e.width<n)return!1;if(0>n+i.width*(t.width/100))return!1;const o=i.height*(t.top/100);if(e.height<o)return!1;if(void 0===t.height)return!0;if(0<=o+i.height*(t.height/100))return!0}})(t,r,e)){const r=t.action&&t.action.type===n.SceneNavigation&&!t.src;if(t.type===o.IMAGE&&!r){const n=new a(e.width*(t.width/100),e.height*(t.height/100));let o;if(s.cloudinaryDefaultImageProvider||t.crop)o=((t,e,i,n,o,r,s="q_auto")=>{let a="",c="",d="",l=",f_auto";const g=class{static getFileNameWithExtension(t){return t?t.split("/").pop().replace(/[?|#].+/,""):null}}.getFileNameWithExtension(i);if(n&&(c=`w_${n.width},h_${n.height},x_${n.x},y_${n.y},c_crop,`),r&&(d=(o?",":"")+"q_1,e_blur:999/"),o){const t=(t=>(h.filter((e=>t<=e.width)).sort(((t,e)=>t.width-e.width))[0]||h[0]).width)(o);a=`c_scale,w_${Math.round(t)}${r?"":"/"}`}return r||"original_quality"!==s?(s||(s="q_auto"),g&&g.endsWith(".gif")&&(l=""),`${e}/${c}${s=-1!==s.indexOf("dpr_window")&&!n&&"undefined"!=typeof window&&window.devicePixelRatio?s.replace(",dpr_window",`,dpr_${window.devicePixelRatio}`):s.replace(",dpr_window","")}${l}/${a}${d}${g}`):`${t}/assets/images/${g}`})(c,l,t.src,t.crop,Math.round(n.width),!1,s.cloudinaryImageAndDprOverride);else{const e=new a(t.originalImageWidth,t.originalImageHeight);o=((t,e,n,o)=>{const r=t.split(".").pop();let s=t;if((!o||o===i.Creator)&&r&&"svg"!==r.toLowerCase()&&-1===t.indexOf("images/transparent-pixel.gif")){const i=r?`.${r}`:"",o=r?t.replace(`.${r}`,""):t;let l;"gif"!==r.toLowerCase()&&n&&(a=e,c=n,l=h.filter((t=>!d(a,t))).sort(((t,e)=>t.width-e.width)).find((t=>d(c,t)))),s=l?`${o}_${l.width}x${l.height}${i}`:`${o}-optimized${i}`}var a,c;return s})(`${c}/${t.src}`,e,n,t.sourceType)}w.push((t=>{const e=document.createElement("img");return e.src=t,e})(o)),g[t.uuid]=o}}})),{imagesElements:w,imagesUrls:g}};if(!window.zmagsWrapper){window.zmagsWrapper=!0;const i=t({VIEWER_BASE_URL:"https://c.zmags.com",CLOUDINARY_BASE_URL:"https://images.creator-prod.zmags.com/image/upload",CNC_ASSET_LOCATION:"//c.zmags.com/static"},"CNC_ASSET_LOCATION"),n=t({VIEWER_BASE_URL:"https://c.zmags.com",CLOUDINARY_BASE_URL:"https://images.creator-prod.zmags.com/image/upload",CNC_ASSET_LOCATION:"//c.zmags.com/static"},"VIEWER_BASE_URL"),o=t({VIEWER_BASE_URL:"https://c.zmags.com",CLOUDINARY_BASE_URL:"https://images.creator-prod.zmags.com/image/upload",CNC_ASSET_LOCATION:"//c.zmags.com/static"},"CLOUDINARY_BASE_URL");g=i,c.map((t=>{if(!((t,e)=>document.querySelectorAll(`[src*="${e}"][src$="${t}"]`).length>0)(t,g)){const e=document.createElement("script");e.src=`${g}/${t}`,e.setAttribute("defer","defer"),document.body.appendChild(e)}}));const s={imagesUrls:{}};(t=>{const e=document.createElement("div");e.style.cssText="position:fixed; visibility:hidden; top:0; z-index:-999;",e.setAttribute("data-content","images"),document.body.append(e)})();const h=Array.prototype.slice.call(document.querySelectorAll(".zmags-viewer-container"));window.addEventListener("unload",(()=>{var t;t=r.LOADED_URLS,localStorage.removeItem(t)})),h.forEach((t=>{const i=t.getAttribute("data-company"),c=t.getAttribute("data-group");if(null===i||null===c)return;const h="true"===t.getAttribute("data-fit-in-height"),d=`ZMAGS_CombinedGroupModel_${c}`;window[d]=null,(async t=>{const e=await fetch(t);return await e.json()})(`${n}/api/experiencesCombined/${i}/${c}`).then((i=>{const g={height:window.innerHeight,width:window.innerWidth},w={height:window.outerHeight,width:window.outerWidth},m=[g.width,w.width],u=[g.height,w.height],p=Math.min(...m.filter(Number)),E=Math.min(...u.filter(Number)),_=new a(p,E);if(i&&i.entries){window[d]=i,e(`ZmagsCombinedDataReady_${c}`);const g=i.entries.sort(((t,e)=>e?.value?.threshold-t?.value?.threshold)),w=g.filter((t=>t?.value?.threshold<=p)),m=(w.length>0?w:g)[0].reference.resource;let u,E;h?(t.style.height="100%",E=t.clientHeight/m.height,u=new a(Math.floor(m.width*E),t.clientHeight)):(E=t.clientWidth/m.width,u=new a(t.clientWidth,Math.floor(m.height*E)));const A=(({scenes:t,overlayScene:e,backgroundScene:i})=>{let n=[];return n=n.concat(e.widgets,t[0].widgets,i.widgets),n})(m),{imagesElements:C,imagesUrls:$}=l(A,u,_,i.companySettings,n,o);s.imagesUrls={...s.imagesUrls,...$},C.length&&(((t,e)=>{const i=document.querySelector('[data-content="images"]');i&&i.append(...t)})(C),f=r.LOADED_URLS,S=s.imagesUrls,localStorage.setItem(f,JSON.stringify(S)))}var f,S})).catch((t=>{window[d]=void 0,e(`ZmagsCombinedDataReady_${c}`)}))}))}var g})();